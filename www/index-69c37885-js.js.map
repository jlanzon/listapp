{"version":3,"sources":["./node_modules/@ionic/core/dist/esm/index-69c37885.js"],"names":["transitionEnd","el","callback","unRegTrans","opts","passive","unregister","onTransitionEnd","ev","target","addEventListener","removeEventListener","CSS_VALUE_REGEX","DURATION_MIN","TRANSITION_END_FALLBACK_PADDING_MS","TRANSFORM_PROPS","win","window","raf","requestAnimationFrame","bind","f","Date","now","Animator","_hasDur","_hasTweenEffect","_isAsync","_isReverse","_destroyed","hasChildren","isPlaying","hasCompleted","length","i","_addEl","nodeType","_elements","push","childAnimation","parent","_childAnimations","duration","undefined","_duration","getDuration","milliseconds","_reversedEasingName","_easingName","getEasing","name","prop","val","_addProp","clearProperyAfterTransition","fx","afterClearStyles","trans","fromVal","toVal","from","to","_fxProperties","find","effectName","state","fxProp","_getProp","shouldTrans","wc","fxState","num","effectUnit","indexOf","r","match","parseFloat","isNaN","className","_beforeAddClasses","_beforeRemoveClasses","styles","_beforeStyles","propertyNames","domReadFn","_readCallbacks","domWriteFn","_writeCallbacks","_afterAddClasses","_afterRemoveClasses","_afterStyles","_hasDuration","_clearAsync","_playInit","_playDomInspect","Promise","resolve","onFinish","oneTimeCallback","clearExistingCallbacks","play","children","child","_progress","_willChange","_beforeAnimation","dur","_asyncEnd","_playProgress","_playToStep","_setTrans","_setAfterStyles","_didFinish","stepValue","shouldComplete","self","_playEnd","_didFinishAll","onTransitionFallback","_timerId","_unregisterTrnsEnd","_transEl","setTimeout","_hasDomReads","clearTimeout","elements","effects","j","finalTransform","fromNum","toNum","tweenEffect","valNum","unit","style","setProperty","forcedLinearEasing","easing","durString","transitionDuration","transitionTimingFunction","_fireBeforeReadFunc","_fireBeforeWriteFunc","_setBeforeStyles","addClasses","removeClasses","elementClassList","classList","c","add","remove","Object","entries","key","value","readFunctions","writeFunctions","beforeAddClasses","beforeRemoveClasses","beforeStyles","keys","propName","removeProperty","afterAddClasses","afterRemoveClasses","afterStyles","addWillChange","willChange","effect","propWC","join","_progressStart","Math","min","max","progressStep","currentStepValue","diff","abs","_progressEnd","isAsync","_onFinishCallbacks","_onFinishOneTimeCallbacks","finishAsyncAnimations","finishNoDurationAnimations","shouldReverse","reverse","destroy","targetEl","create","animationBuilder","baseEl"],"mappings":"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","file":"index-69c37885-js.js","sourcesContent":["const transitionEnd = (el, callback) => {\r\n    let unRegTrans;\r\n    const opts = { passive: true };\r\n    const unregister = () => {\r\n        if (unRegTrans) {\r\n            unRegTrans();\r\n        }\r\n    };\r\n    const onTransitionEnd = (ev) => {\r\n        if (el === ev.target) {\r\n            unregister();\r\n            callback(ev);\r\n        }\r\n    };\r\n    if (el) {\r\n        el.addEventListener('webkitTransitionEnd', onTransitionEnd, opts);\r\n        el.addEventListener('transitionend', onTransitionEnd, opts);\r\n        unRegTrans = () => {\r\n            el.removeEventListener('webkitTransitionEnd', onTransitionEnd, opts);\r\n            el.removeEventListener('transitionend', onTransitionEnd, opts);\r\n        };\r\n    }\r\n    return unregister;\r\n};\n\nconst CSS_VALUE_REGEX = /(^-?\\d*\\.?\\d*)(.*)/;\r\nconst DURATION_MIN = 32;\r\nconst TRANSITION_END_FALLBACK_PADDING_MS = 400;\r\nconst TRANSFORM_PROPS = {\r\n    'translateX': 1,\r\n    'translateY': 1,\r\n    'translateZ': 1,\r\n    'scale': 1,\r\n    'scaleX': 1,\r\n    'scaleY': 1,\r\n    'scaleZ': 1,\r\n    'rotate': 1,\r\n    'rotateX': 1,\r\n    'rotateY': 1,\r\n    'rotateZ': 1,\r\n    'skewX': 1,\r\n    'skewY': 1,\r\n    'perspective': 1\r\n};\r\nconst win = typeof window !== 'undefined' ? window : {};\r\nconst raf = win.requestAnimationFrame\r\n    ? win.requestAnimationFrame.bind(win)\r\n    : (f) => f(Date.now());\r\nclass Animator {\r\n    constructor() {\r\n        this._hasDur = false;\r\n        this._hasTweenEffect = false;\r\n        this._isAsync = false;\r\n        this._isReverse = false;\r\n        this._destroyed = false;\r\n        this.hasChildren = false;\r\n        this.isPlaying = false;\r\n        this.hasCompleted = false;\r\n    }\r\n    addElement(el) {\r\n        if (el != null) {\r\n            if (el.length > 0) {\r\n                for (let i = 0; i < el.length; i++) {\r\n                    this._addEl(el[i]);\r\n                }\r\n            }\r\n            else {\r\n                this._addEl(el);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * NO DOM\r\n     */\r\n    _addEl(el) {\r\n        if (el.nodeType === 1) {\r\n            (this._elements = this._elements || []).push(el);\r\n        }\r\n    }\r\n    /**\r\n     * Add a child animation to this animation.\r\n     */\r\n    add(childAnimation) {\r\n        childAnimation.parent = this;\r\n        this.hasChildren = true;\r\n        (this._childAnimations = this._childAnimations || []).push(childAnimation);\r\n        return this;\r\n    }\r\n    /**\r\n     * Get the duration of this animation. If this animation does\r\n     * not have a duration, then it'll get the duration from its parent.\r\n     */\r\n    getDuration(opts) {\r\n        if (opts && opts.duration !== undefined) {\r\n            return opts.duration;\r\n        }\r\n        else if (this._duration !== undefined) {\r\n            return this._duration;\r\n        }\r\n        else if (this.parent) {\r\n            return this.parent.getDuration();\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Returns if the animation is a root one.\r\n     */\r\n    isRoot() {\r\n        return !this.parent;\r\n    }\r\n    /**\r\n     * Set the duration for this animation.\r\n     */\r\n    duration(milliseconds) {\r\n        this._duration = milliseconds;\r\n        return this;\r\n    }\r\n    /**\r\n     * Get the easing of this animation. If this animation does\r\n     * not have an easing, then it'll get the easing from its parent.\r\n     */\r\n    getEasing() {\r\n        if (this._isReverse && this._reversedEasingName !== undefined) {\r\n            return this._reversedEasingName;\r\n        }\r\n        return this._easingName !== undefined ? this._easingName : (this.parent && this.parent.getEasing()) || null;\r\n    }\r\n    /**\r\n     * Set the easing for this animation.\r\n     */\r\n    easing(name) {\r\n        this._easingName = name;\r\n        return this;\r\n    }\r\n    /**\r\n     * Set the easing for this reversed animation.\r\n     */\r\n    easingReverse(name) {\r\n        this._reversedEasingName = name;\r\n        return this;\r\n    }\r\n    /**\r\n     * Add the \"from\" value for a specific property.\r\n     */\r\n    from(prop, val) {\r\n        this._addProp('from', prop, val);\r\n        return this;\r\n    }\r\n    /**\r\n     * Add the \"to\" value for a specific property.\r\n     */\r\n    to(prop, val, clearProperyAfterTransition = false) {\r\n        const fx = this._addProp('to', prop, val);\r\n        if (clearProperyAfterTransition) {\r\n            // if this effect is a transform then clear the transform effect\r\n            // otherwise just clear the actual property\r\n            this.afterClearStyles(fx.trans ? ['transform', '-webkit-transform'] : [prop]);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Shortcut to add both the \"from\" and \"to\" for the same property.\r\n     */\r\n    fromTo(prop, fromVal, toVal, clearProperyAfterTransition) {\r\n        return this.from(prop, fromVal).to(prop, toVal, clearProperyAfterTransition);\r\n    }\r\n    /**\r\n     * NO DOM\r\n     */\r\n    _getProp(name) {\r\n        if (this._fxProperties) {\r\n            return this._fxProperties.find(prop => prop.effectName === name);\r\n        }\r\n        return undefined;\r\n    }\r\n    _addProp(state, prop, val) {\r\n        let fxProp = this._getProp(prop);\r\n        if (!fxProp) {\r\n            // first time we've see this EffectProperty\r\n            const shouldTrans = (TRANSFORM_PROPS[prop] === 1);\r\n            fxProp = {\r\n                effectName: prop,\r\n                trans: shouldTrans,\r\n                // add the will-change property for transforms or opacity\r\n                wc: (shouldTrans ? 'transform' : prop)\r\n            };\r\n            (this._fxProperties = this._fxProperties || []).push(fxProp);\r\n        }\r\n        // add from/to EffectState to the EffectProperty\r\n        const fxState = {\r\n            val,\r\n            num: 0,\r\n            effectUnit: '',\r\n        };\r\n        fxProp[state] = fxState;\r\n        if (typeof val === 'string' && val.indexOf(' ') < 0) {\r\n            const r = val.match(CSS_VALUE_REGEX);\r\n            if (r) {\r\n                const num = parseFloat(r[1]);\r\n                if (!isNaN(num)) {\r\n                    fxState.num = num;\r\n                }\r\n                fxState.effectUnit = (r[0] !== r[2] ? r[2] : '');\r\n            }\r\n        }\r\n        else if (typeof val === 'number') {\r\n            fxState.num = val;\r\n        }\r\n        return fxProp;\r\n    }\r\n    /**\r\n     * Add CSS class to this animation's elements\r\n     * before the animation begins.\r\n     */\r\n    beforeAddClass(className) {\r\n        (this._beforeAddClasses = this._beforeAddClasses || []).push(className);\r\n        return this;\r\n    }\r\n    /**\r\n     * Remove CSS class from this animation's elements\r\n     * before the animation begins.\r\n     */\r\n    beforeRemoveClass(className) {\r\n        (this._beforeRemoveClasses = this._beforeRemoveClasses || []).push(className);\r\n        return this;\r\n    }\r\n    /**\r\n     * Set CSS inline styles to this animation's elements\r\n     * before the animation begins.\r\n     */\r\n    beforeStyles(styles) {\r\n        this._beforeStyles = styles;\r\n        return this;\r\n    }\r\n    /**\r\n     * Clear CSS inline styles from this animation's elements\r\n     * before the animation begins.\r\n     */\r\n    beforeClearStyles(propertyNames) {\r\n        this._beforeStyles = this._beforeStyles || {};\r\n        for (const prop of propertyNames) {\r\n            this._beforeStyles[prop] = '';\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a function which contains DOM reads, which will run\r\n     * before the animation begins.\r\n     */\r\n    beforeAddRead(domReadFn) {\r\n        (this._readCallbacks = this._readCallbacks || []).push(domReadFn);\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a function which contains DOM writes, which will run\r\n     * before the animation begins.\r\n     */\r\n    beforeAddWrite(domWriteFn) {\r\n        (this._writeCallbacks = this._writeCallbacks || []).push(domWriteFn);\r\n        return this;\r\n    }\r\n    /**\r\n     * Add CSS class to this animation's elements\r\n     * after the animation finishes.\r\n     */\r\n    afterAddClass(className) {\r\n        (this._afterAddClasses = this._afterAddClasses || []).push(className);\r\n        return this;\r\n    }\r\n    /**\r\n     * Remove CSS class from this animation's elements\r\n     * after the animation finishes.\r\n     */\r\n    afterRemoveClass(className) {\r\n        (this._afterRemoveClasses = this._afterRemoveClasses || []).push(className);\r\n        return this;\r\n    }\r\n    /**\r\n     * Set CSS inline styles to this animation's elements\r\n     * after the animation finishes.\r\n     */\r\n    afterStyles(styles) {\r\n        this._afterStyles = styles;\r\n        return this;\r\n    }\r\n    /**\r\n     * Clear CSS inline styles from this animation's elements\r\n     * after the animation finishes.\r\n     */\r\n    afterClearStyles(propertyNames) {\r\n        this._afterStyles = this._afterStyles || {};\r\n        for (const prop of propertyNames) {\r\n            this._afterStyles[prop] = '';\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Play the animation.\r\n     */\r\n    play(opts) {\r\n        // If the animation was already invalidated (it did finish), do nothing\r\n        if (this._destroyed) {\r\n            return;\r\n        }\r\n        // this is the top level animation and is in full control\r\n        // of when the async play() should actually kick off\r\n        // if there is no duration then it'll set the TO property immediately\r\n        // if there is a duration, then it'll stage all animations at the\r\n        // FROM property and transition duration, wait a few frames, then\r\n        // kick off the animation by setting the TO property for each animation\r\n        this._isAsync = this._hasDuration(opts);\r\n        // ensure all past transition end events have been cleared\r\n        this._clearAsync();\r\n        // recursively kicks off the correct progress step for each child animation\r\n        // ******** DOM WRITE ****************\r\n        this._playInit(opts);\r\n        // doubling up RAFs since this animation was probably triggered\r\n        // from an input event, and just having one RAF would have this code\r\n        // run within the same frame as the triggering input event, and the\r\n        // input event probably already did way too much work for one frame\r\n        raf(() => {\r\n            raf(() => {\r\n                this._playDomInspect(opts);\r\n            });\r\n        });\r\n    }\r\n    playAsync(opts) {\r\n        return new Promise(resolve => {\r\n            this.onFinish(resolve, { oneTimeCallback: true, clearExistingCallbacks: true });\r\n            this.play(opts);\r\n            return this;\r\n        });\r\n    }\r\n    playSync() {\r\n        // If the animation was already invalidated (it did finish), do nothing\r\n        if (!this._destroyed) {\r\n            const opts = { duration: 0 };\r\n            this._isAsync = false;\r\n            this._clearAsync();\r\n            this._playInit(opts);\r\n            this._playDomInspect(opts);\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _playInit(opts) {\r\n        // always default that an animation does not tween\r\n        // a tween requires that an Animation class has an element\r\n        // and that it has at least one FROM/TO effect\r\n        // and that the FROM/TO effect can tween numeric values\r\n        this._hasTweenEffect = false;\r\n        this.isPlaying = true;\r\n        this.hasCompleted = false;\r\n        this._hasDur = (this.getDuration(opts) > DURATION_MIN);\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                // ******** DOM WRITE ****************\r\n                child._playInit(opts);\r\n            }\r\n        }\r\n        if (this._hasDur) {\r\n            // if there is a duration then we want to start at step 0\r\n            // ******** DOM WRITE ****************\r\n            this._progress(0);\r\n            // add the will-change properties\r\n            // ******** DOM WRITE ****************\r\n            this._willChange(true);\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * NO RECURSION\r\n     * ROOT ANIMATION\r\n     */\r\n    _playDomInspect(opts) {\r\n        // fire off all the \"before\" function that have DOM READS in them\r\n        // elements will be in the DOM, however visibily hidden\r\n        // so we can read their dimensions if need be\r\n        // ******** DOM READ ****************\r\n        // ******** DOM WRITE ****************\r\n        this._beforeAnimation();\r\n        // for the root animation only\r\n        // set the async TRANSITION END event\r\n        // and run onFinishes when the transition ends\r\n        const dur = this.getDuration(opts);\r\n        if (this._isAsync) {\r\n            this._asyncEnd(dur, true);\r\n        }\r\n        // ******** DOM WRITE ****************\r\n        this._playProgress(opts);\r\n        if (this._isAsync && !this._destroyed) {\r\n            // this animation has a duration so we need another RAF\r\n            // for the CSS TRANSITION properties to kick in\r\n            raf(() => {\r\n                this._playToStep(1);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _playProgress(opts) {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                // ******** DOM WRITE ****************\r\n                child._playProgress(opts);\r\n            }\r\n        }\r\n        if (this._hasDur) {\r\n            // set the CSS TRANSITION duration/easing\r\n            // ******** DOM WRITE ****************\r\n            this._setTrans(this.getDuration(opts), false);\r\n        }\r\n        else {\r\n            // this animation does not have a duration, so it should not animate\r\n            // just go straight to the TO properties and call it done\r\n            // ******** DOM WRITE ****************\r\n            this._progress(1);\r\n            // since there was no animation, immediately run the after\r\n            // ******** DOM WRITE ****************\r\n            this._setAfterStyles();\r\n            // this animation has no duration, so it has finished\r\n            // other animations could still be running\r\n            this._didFinish(true);\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _playToStep(stepValue) {\r\n        if (!this._destroyed) {\r\n            const children = this._childAnimations;\r\n            if (children) {\r\n                for (const child of children) {\r\n                    // ******** DOM WRITE ****************\r\n                    child._playToStep(stepValue);\r\n                }\r\n            }\r\n            if (this._hasDur) {\r\n                // browser had some time to render everything in place\r\n                // and the transition duration/easing is set\r\n                // now set the TO properties which will trigger the transition to begin\r\n                // ******** DOM WRITE ****************\r\n                this._progress(stepValue);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * NO RECURSION\r\n     * ROOT ANIMATION\r\n     */\r\n    _asyncEnd(dur, shouldComplete) {\r\n        const self = this;\r\n        const onTransitionEnd = () => {\r\n            // congrats! a successful transition completed!\r\n            // ensure transition end events and timeouts have been cleared\r\n            self._clearAsync();\r\n            // ******** DOM WRITE ****************\r\n            self._playEnd();\r\n            // transition finished\r\n            self._didFinishAll(shouldComplete, true, false);\r\n        };\r\n        const onTransitionFallback = () => {\r\n            // oh noz! the transition end event didn't fire in time!\r\n            // instead the fallback timer when first\r\n            // if all goes well this fallback should never fire\r\n            // clear the other async end events from firing\r\n            self._timerId = undefined;\r\n            self._clearAsync();\r\n            // set the after styles\r\n            // ******** DOM WRITE ****************\r\n            self._playEnd(shouldComplete ? 1 : 0);\r\n            // transition finished\r\n            self._didFinishAll(shouldComplete, true, false);\r\n        };\r\n        // set the TRANSITION END event on one of the transition elements\r\n        self._unregisterTrnsEnd = transitionEnd(self._transEl(), onTransitionEnd);\r\n        // set a fallback timeout if the transition end event never fires, or is too slow\r\n        // transition end fallback: (animation duration + XXms)\r\n        self._timerId = setTimeout(onTransitionFallback, (dur + TRANSITION_END_FALLBACK_PADDING_MS));\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _playEnd(stepValue) {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                // ******** DOM WRITE ****************\r\n                child._playEnd(stepValue);\r\n            }\r\n        }\r\n        if (this._hasDur) {\r\n            if (stepValue !== undefined) {\r\n                // too late to have a smooth animation, just finish it\r\n                // ******** DOM WRITE ****************\r\n                this._setTrans(0, true);\r\n                // ensure the ending progress step gets rendered\r\n                // ******** DOM WRITE ****************\r\n                this._progress(stepValue);\r\n            }\r\n            // set the after styles\r\n            // ******** DOM WRITE ****************\r\n            this._setAfterStyles();\r\n            // remove the will-change properties\r\n            // ******** DOM WRITE ****************\r\n            this._willChange(false);\r\n        }\r\n    }\r\n    /**\r\n     * NO DOM\r\n     * RECURSION\r\n     */\r\n    _hasDuration(opts) {\r\n        if (this.getDuration(opts) > DURATION_MIN) {\r\n            return true;\r\n        }\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                if (child._hasDuration(opts)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * NO DOM\r\n     * RECURSION\r\n     */\r\n    _hasDomReads() {\r\n        if (this._readCallbacks && this._readCallbacks.length > 0) {\r\n            return true;\r\n        }\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                if (child._hasDomReads()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Immediately stop at the end of the animation.\r\n     */\r\n    stop(stepValue = 1) {\r\n        // ensure all past transition end events have been cleared\r\n        this._clearAsync();\r\n        this._hasDur = true;\r\n        this._playEnd(stepValue);\r\n    }\r\n    /**\r\n     * NO DOM\r\n     * NO RECURSION\r\n     */\r\n    _clearAsync() {\r\n        if (this._unregisterTrnsEnd) {\r\n            this._unregisterTrnsEnd();\r\n        }\r\n        if (this._timerId) {\r\n            clearTimeout(this._timerId);\r\n        }\r\n        this._timerId = this._unregisterTrnsEnd = undefined;\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * NO RECURSION\r\n     */\r\n    _progress(stepValue) {\r\n        // bread 'n butter\r\n        let val;\r\n        const elements = this._elements;\r\n        const effects = this._fxProperties;\r\n        if (!elements || elements.length === 0 || !effects || this._destroyed) {\r\n            return;\r\n        }\r\n        // flip the number if we're going in reverse\r\n        if (this._isReverse) {\r\n            stepValue = 1 - stepValue;\r\n        }\r\n        let i = 0;\r\n        let j = 0;\r\n        let finalTransform = '';\r\n        let fx;\r\n        for (i = 0; i < effects.length; i++) {\r\n            fx = effects[i];\r\n            if (fx.from && fx.to) {\r\n                const fromNum = fx.from.num;\r\n                const toNum = fx.to.num;\r\n                const tweenEffect = (fromNum !== toNum);\r\n                if (tweenEffect) {\r\n                    this._hasTweenEffect = true;\r\n                }\r\n                if (stepValue === 0) {\r\n                    // FROM\r\n                    val = fx.from.val;\r\n                }\r\n                else if (stepValue === 1) {\r\n                    // TO\r\n                    val = fx.to.val;\r\n                }\r\n                else if (tweenEffect) {\r\n                    // EVERYTHING IN BETWEEN\r\n                    const valNum = (((toNum - fromNum) * stepValue) + fromNum);\r\n                    const unit = fx.to.effectUnit;\r\n                    val = valNum + unit;\r\n                }\r\n                if (val !== null) {\r\n                    const prop = fx.effectName;\r\n                    if (fx.trans) {\r\n                        finalTransform += prop + '(' + val + ') ';\r\n                    }\r\n                    else {\r\n                        for (j = 0; j < elements.length; j++) {\r\n                            // ******** DOM WRITE ****************\r\n                            elements[j].style.setProperty(prop, val);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // place all transforms on the same property\r\n        if (finalTransform.length > 0) {\r\n            if (!this._isReverse && stepValue !== 1 || this._isReverse && stepValue !== 0) {\r\n                finalTransform += 'translateZ(0px)';\r\n            }\r\n            for (i = 0; i < elements.length; i++) {\r\n                // ******** DOM WRITE ****************\r\n                elements[i].style.setProperty('transform', finalTransform);\r\n                elements[i].style.setProperty('-webkit-transform', finalTransform);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * NO RECURSION\r\n     */\r\n    _setTrans(dur, forcedLinearEasing) {\r\n        // Transition is not enabled if there are not effects\r\n        const elements = this._elements;\r\n        if (!elements || elements.length === 0 || !this._fxProperties) {\r\n            return;\r\n        }\r\n        // set the TRANSITION properties inline on the element\r\n        const easing = (forcedLinearEasing ? 'linear' : this.getEasing());\r\n        const durString = dur + 'ms';\r\n        for (const { style } of elements) {\r\n            if (dur > 0) {\r\n                // ******** DOM WRITE ****************\r\n                style.transitionDuration = durString;\r\n                // each animation can have a different easing\r\n                if (easing !== null) {\r\n                    // ******** DOM WRITE ****************\r\n                    style.transitionTimingFunction = easing;\r\n                }\r\n            }\r\n            else {\r\n                style.transitionDuration = '0';\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * DOM READ\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _beforeAnimation() {\r\n        // fire off all the \"before\" function that have DOM READS in them\r\n        // elements will be in the DOM, however visibily hidden\r\n        // so we can read their dimensions if need be\r\n        // ******** DOM READ ****************\r\n        this._fireBeforeReadFunc();\r\n        // ******** DOM READS ABOVE / DOM WRITES BELOW ****************\r\n        // fire off all the \"before\" function that have DOM WRITES in them\r\n        // ******** DOM WRITE ****************\r\n        this._fireBeforeWriteFunc();\r\n        // stage all of the before css classes and inline styles\r\n        // ******** DOM WRITE ****************\r\n        this._setBeforeStyles();\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _setBeforeStyles() {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                child._setBeforeStyles();\r\n            }\r\n        }\r\n        const elements = this._elements;\r\n        // before the animations have started\r\n        // only set before styles if animation is not reversed\r\n        if (!elements || elements.length === 0 || this._isReverse) {\r\n            return;\r\n        }\r\n        const addClasses = this._beforeAddClasses;\r\n        const removeClasses = this._beforeRemoveClasses;\r\n        for (const el of elements) {\r\n            const elementClassList = el.classList;\r\n            // css classes to add before the animation\r\n            if (addClasses) {\r\n                for (const c of addClasses) {\r\n                    // ******** DOM WRITE ****************\r\n                    elementClassList.add(c);\r\n                }\r\n            }\r\n            // css classes to remove before the animation\r\n            if (removeClasses) {\r\n                for (const c of removeClasses) {\r\n                    // ******** DOM WRITE ****************\r\n                    elementClassList.remove(c);\r\n                }\r\n            }\r\n            // inline styles to add before the animation\r\n            if (this._beforeStyles) {\r\n                for (const [key, value] of Object.entries(this._beforeStyles)) {\r\n                    // ******** DOM WRITE ****************\r\n                    el.style.setProperty(key, value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * DOM READ\r\n     * RECURSION\r\n     */\r\n    _fireBeforeReadFunc() {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                // ******** DOM READ ****************\r\n                child._fireBeforeReadFunc();\r\n            }\r\n        }\r\n        const readFunctions = this._readCallbacks;\r\n        if (readFunctions) {\r\n            for (const callback of readFunctions) {\r\n                // ******** DOM READ ****************\r\n                callback();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _fireBeforeWriteFunc() {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                // ******** DOM WRITE ****************\r\n                child._fireBeforeWriteFunc();\r\n            }\r\n        }\r\n        const writeFunctions = this._writeCallbacks;\r\n        if (writeFunctions) {\r\n            for (const callback of writeFunctions) {\r\n                // ******** DOM WRITE ****************\r\n                callback();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     */\r\n    _setAfterStyles() {\r\n        const elements = this._elements;\r\n        if (!elements) {\r\n            return;\r\n        }\r\n        for (const el of elements) {\r\n            const elementClassList = el.classList;\r\n            // remove the transition duration/easing\r\n            // ******** DOM WRITE ****************\r\n            el.style.transitionDuration = el.style.transitionTimingFunction = '';\r\n            if (this._isReverse) {\r\n                // finished in reverse direction\r\n                // css classes that were added before the animation should be removed\r\n                const beforeAddClasses = this._beforeAddClasses;\r\n                if (beforeAddClasses) {\r\n                    for (const c of beforeAddClasses) {\r\n                        elementClassList.remove(c);\r\n                    }\r\n                }\r\n                // css classes that were removed before the animation should be added\r\n                const beforeRemoveClasses = this._beforeRemoveClasses;\r\n                if (beforeRemoveClasses) {\r\n                    for (const c of beforeRemoveClasses) {\r\n                        elementClassList.add(c);\r\n                    }\r\n                }\r\n                // inline styles that were added before the animation should be removed\r\n                const beforeStyles = this._beforeStyles;\r\n                if (beforeStyles) {\r\n                    for (const propName of Object.keys(beforeStyles)) {\r\n                        // ******** DOM WRITE ****************\r\n                        el.style.removeProperty(propName);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // finished in forward direction\r\n                // css classes to add after the animation\r\n                const afterAddClasses = this._afterAddClasses;\r\n                if (afterAddClasses) {\r\n                    for (const c of afterAddClasses) {\r\n                        // ******** DOM WRITE ****************\r\n                        elementClassList.add(c);\r\n                    }\r\n                }\r\n                // css classes to remove after the animation\r\n                const afterRemoveClasses = this._afterRemoveClasses;\r\n                if (afterRemoveClasses) {\r\n                    for (const c of afterRemoveClasses) {\r\n                        // ******** DOM WRITE ****************\r\n                        elementClassList.remove(c);\r\n                    }\r\n                }\r\n                // inline styles to add after the animation\r\n                const afterStyles = this._afterStyles;\r\n                if (afterStyles) {\r\n                    for (const [key, value] of Object.entries(afterStyles)) {\r\n                        el.style.setProperty(key, value);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * NO RECURSION\r\n     */\r\n    _willChange(addWillChange) {\r\n        let wc;\r\n        const effects = this._fxProperties;\r\n        let willChange;\r\n        if (addWillChange && effects) {\r\n            wc = [];\r\n            for (const effect of effects) {\r\n                const propWC = effect.wc;\r\n                if (propWC === 'webkitTransform') {\r\n                    wc.push('transform', '-webkit-transform');\r\n                }\r\n                else if (propWC !== undefined) {\r\n                    wc.push(propWC);\r\n                }\r\n            }\r\n            willChange = wc.join(',');\r\n        }\r\n        else {\r\n            willChange = '';\r\n        }\r\n        const elements = this._elements;\r\n        if (elements) {\r\n            for (const el of elements) {\r\n                // ******** DOM WRITE ****************\r\n                el.style.setProperty('will-change', willChange);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Start the animation with a user controlled progress.\r\n     */\r\n    progressStart() {\r\n        // ensure all past transition end events have been cleared\r\n        this._clearAsync();\r\n        // ******** DOM READ/WRITE ****************\r\n        this._beforeAnimation();\r\n        // ******** DOM WRITE ****************\r\n        this._progressStart();\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _progressStart() {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                // ******** DOM WRITE ****************\r\n                child._progressStart();\r\n            }\r\n        }\r\n        // force no duration, linear easing\r\n        // ******** DOM WRITE ****************\r\n        this._setTrans(0, true);\r\n        // ******** DOM WRITE ****************\r\n        this._willChange(true);\r\n    }\r\n    /**\r\n     * Set the progress step for this animation.\r\n     * progressStep() is not debounced, so it should not be called faster than 60FPS.\r\n     */\r\n    progressStep(stepValue) {\r\n        // only update if the last update was more than 16ms ago\r\n        stepValue = Math.min(1, Math.max(0, stepValue));\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                // ******** DOM WRITE ****************\r\n                child.progressStep(stepValue);\r\n            }\r\n        }\r\n        // ******** DOM WRITE ****************\r\n        this._progress(stepValue);\r\n    }\r\n    /**\r\n     * End the progress animation.\r\n     */\r\n    progressEnd(shouldComplete, currentStepValue, dur = -1) {\r\n        if (this._isReverse) {\r\n            // if the animation is going in reverse then\r\n            // flip the step value: 0 becomes 1, 1 becomes 0\r\n            currentStepValue = 1 - currentStepValue;\r\n        }\r\n        const stepValue = shouldComplete ? 1 : 0;\r\n        const diff = Math.abs(currentStepValue - stepValue);\r\n        if (dur < 0) {\r\n            dur = this._duration || 0;\r\n        }\r\n        else if (diff < 0.05) {\r\n            dur = 0;\r\n        }\r\n        this._isAsync = (dur > 30);\r\n        this._progressEnd(shouldComplete, stepValue, dur, this._isAsync);\r\n        if (this._isAsync) {\r\n            // for the root animation only\r\n            // set the async TRANSITION END event\r\n            // and run onFinishes when the transition ends\r\n            // ******** DOM WRITE ****************\r\n            this._asyncEnd(dur, shouldComplete);\r\n            // this animation has a duration so we need another RAF\r\n            // for the CSS TRANSITION properties to kick in\r\n            if (!this._destroyed) {\r\n                raf(() => {\r\n                    this._playToStep(stepValue);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * DOM WRITE\r\n     * RECURSION\r\n     */\r\n    _progressEnd(shouldComplete, stepValue, dur, isAsync) {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                // ******** DOM WRITE ****************\r\n                child._progressEnd(shouldComplete, stepValue, dur, isAsync);\r\n            }\r\n        }\r\n        if (!isAsync) {\r\n            // stop immediately\r\n            // set all the animations to their final position\r\n            // ******** DOM WRITE ****************\r\n            this._progress(stepValue);\r\n            this._willChange(false);\r\n            this._setAfterStyles();\r\n            this._didFinish(shouldComplete);\r\n        }\r\n        else {\r\n            // animate it back to it's ending position\r\n            this.isPlaying = true;\r\n            this.hasCompleted = false;\r\n            this._hasDur = true;\r\n            // ******** DOM WRITE ****************\r\n            this._willChange(true);\r\n            this._setTrans(dur, false);\r\n        }\r\n    }\r\n    /**\r\n     * Add a callback to fire when the animation has finished.\r\n     */\r\n    onFinish(callback, opts) {\r\n        if (opts && opts.clearExistingCallbacks) {\r\n            this._onFinishCallbacks = this._onFinishOneTimeCallbacks = undefined;\r\n        }\r\n        if (opts && opts.oneTimeCallback) {\r\n            this._onFinishOneTimeCallbacks = this._onFinishOneTimeCallbacks || [];\r\n            this._onFinishOneTimeCallbacks.push(callback);\r\n        }\r\n        else {\r\n            this._onFinishCallbacks = this._onFinishCallbacks || [];\r\n            this._onFinishCallbacks.push(callback);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * NO DOM\r\n     * RECURSION\r\n     */\r\n    _didFinishAll(hasCompleted, finishAsyncAnimations, finishNoDurationAnimations) {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                child._didFinishAll(hasCompleted, finishAsyncAnimations, finishNoDurationAnimations);\r\n            }\r\n        }\r\n        if (finishAsyncAnimations && this._isAsync || finishNoDurationAnimations && !this._isAsync) {\r\n            this._didFinish(hasCompleted);\r\n        }\r\n    }\r\n    /**\r\n     * NO RECURSION\r\n     */\r\n    _didFinish(hasCompleted) {\r\n        this.isPlaying = false;\r\n        this.hasCompleted = hasCompleted;\r\n        if (this._onFinishCallbacks) {\r\n            // run all finish callbacks\r\n            for (const callback of this._onFinishCallbacks) {\r\n                callback(this);\r\n            }\r\n        }\r\n        if (this._onFinishOneTimeCallbacks) {\r\n            // run all \"onetime\" finish callbacks\r\n            for (const callback of this._onFinishOneTimeCallbacks) {\r\n                callback(this);\r\n            }\r\n            this._onFinishOneTimeCallbacks.length = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Reverse the animation.\r\n     */\r\n    reverse(shouldReverse = true) {\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                child.reverse(shouldReverse);\r\n            }\r\n        }\r\n        this._isReverse = !!shouldReverse;\r\n        return this;\r\n    }\r\n    /**\r\n     * Recursively destroy this animation and all child animations.\r\n     */\r\n    destroy() {\r\n        this._didFinish(false);\r\n        this._destroyed = true;\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                child.destroy();\r\n            }\r\n        }\r\n        this._clearAsync();\r\n        if (this._elements) {\r\n            this._elements.length = 0;\r\n        }\r\n        if (this._readCallbacks) {\r\n            this._readCallbacks.length = 0;\r\n        }\r\n        if (this._writeCallbacks) {\r\n            this._writeCallbacks.length = 0;\r\n        }\r\n        this.parent = undefined;\r\n        if (this._childAnimations) {\r\n            this._childAnimations.length = 0;\r\n        }\r\n        if (this._onFinishCallbacks) {\r\n            this._onFinishCallbacks.length = 0;\r\n        }\r\n        if (this._onFinishOneTimeCallbacks) {\r\n            this._onFinishOneTimeCallbacks.length = 0;\r\n        }\r\n    }\r\n    /**\r\n     * NO DOM\r\n     */\r\n    _transEl() {\r\n        // get the lowest level element that has an Animator\r\n        const children = this._childAnimations;\r\n        if (children) {\r\n            for (const child of children) {\r\n                const targetEl = child._transEl();\r\n                if (targetEl) {\r\n                    return targetEl;\r\n                }\r\n            }\r\n        }\r\n        return (this._hasTweenEffect &&\r\n            this._hasDur &&\r\n            this._elements !== undefined &&\r\n            this._elements.length > 0 ?\r\n            this._elements[0] : null);\r\n    }\r\n}\n\nconst create = (animationBuilder, baseEl, opts) => {\r\n    if (animationBuilder) {\r\n        return animationBuilder(Animator, baseEl, opts);\r\n    }\r\n    return Promise.resolve(new Animator());\r\n};\n\nexport { create };\n"],"sourceRoot":"webpack:///"}